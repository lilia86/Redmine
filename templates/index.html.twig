{% extends "base.html.twig" %}
{% block body %}

	<div class="container-fluid" id="wrapper">
		<div class="row">
			<nav class="sidebar col-xs-12 col-sm-4 col-lg-3 col-xl-2 bg-faded sidebar-style-1">
				<h1 class="site-title"><a href="index.html.twig"><em class="fa fa-rocket"></em> Redmine</a></h1>
				
				<a href="#menu-toggle" class="btn btn-default" id="menu-toggle"><em class="fa fa-bars"></em></a>
				
				<ul class="nav nav-pills flex-column sidebar-nav">
					<li class="nav-item"><a class="nav-link active" href="{{ path('home_page') }}"><em class="fa fa-dashboard"></em> Dashboard <span class="sr-only">(current)</span></a></li>
					<li class="nav-item"><a class="nav-link" href="{{ path('projects') }}"><em class="fa fa-calendar-o"></em> Projects</a></li>
				</ul>
			</nav>
			
			<main class="col-xs-12 col-sm-8 offset-sm-4 col-lg-9 offset-lg-3 col-xl-10 offset-xl-2 pt-3 pl-4">
				<header class="page-header row justify-center">
					<div class="col-md-6 col-lg-8" >
						<h1 class="float-left text-center text-md-left">Redmine</h1>
					</div>
					
					<div class="dropdown user-dropdown col-md-6 col-lg-4 text-center text-md-right"><a class="btn btn-stripped dropdown-toggle" href="https://example.com" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						<img src="{{ asset('images/profile-pic.jpg')}}" alt="profile photo" class="circle float-left profile-photo" width="50" height="auto">
						
						<div class="username mt-1">
							<h4 class="mb-1"> {{ app.user ? app.user.username : 'Anonimus' }}</h4>

						</div>
						</a>
						
						<div class="dropdown-menu dropdown-menu-right" style="margin-right: 1.5rem;" aria-labelledby="dropdownMenuLink"><a class="dropdown-item" href="#"><em class="fa fa-user-circle mr-1"></em> View Profile</a>
						     <a class="dropdown-item" href="#"><em class="fa fa-sliders mr-1"></em> Preferences</a>
						     <a class="dropdown-item" href="{{ path('logout') }}"><em class="fa fa-power-off mr-1"></em> Logout</a></div>
					</div>
					
					<div class="clear"></div>
				</header>
				
				<section class="row">
					<div class="col-sm-12">
						<section class="row">
							<div class="col-md-12 col-lg-8">
								<div class="jumbotron">
									<h1 class="mb-4">Hello {{ app.user.username }}</h1>
									
									<p class="lead">This aplication will help you to watch for the information about your projects</p>

									
									<p class="lead"><a class="btn btn-primary btn-lg mt-2" href="#" role="button">Learn more</a></p>
								</div>
								
								<div class="card mb-4">
									<div class="card-block">
										<h3 class="card-title">Last Projects</h3>
										
										<div class="dropdown card-title-btn-container">
											<button class="btn btn-sm btn-subtle" type="button"><em class="fa fa-list-ul"><a  href="{{ path('projects') }}">View All</a></em></button>
											
											<button class="btn btn-sm btn-subtle dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><em class="fa fa-cog"></em></button>
											
											<div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton"><a class="dropdown-item" href="#"><em class="fa fa-search mr-1"></em> More info</a>
											    <a class="dropdown-item" href="#"><em class="fa fa-thumb-tack mr-1"></em> Pin Window</a>
											    <a class="dropdown-item" href="#"><em class="fa fa-remove mr-1"></em> Close Window</a></div>
										</div>
										
										<div class="table-responsive">
											<table class="table table-striped">
												<thead>
													<tr>
														<th>Name</th>
														
														<th>Identifier</th>

														<th>Status</th>
														
														<th>Started at</th>

													</tr>
												</thead>
												
												<tbody>
                                                {% for project in projects %}
													<tr>
														<td>{{ project.name }}</td>
														
														<td>{{ project.identifier }}</td>

														<td>{{ project.status }}</td>
														
														<td>{{ project.getCreatedOn()|date('d/m/Y') }}</td>
													</tr>
												{% endfor %}

												</tbody>
											</table>
										</div>
									</div>
								</div>

								<div class="card mb-4">
									<div class="card-block">
										<h3 class="card-title">Latest comments</h3>

										<div class="divider" style="margin-top: 1rem;"></div>

										<div class="articles-container">
											{% for comment in comments %}
											<div class="article border-bottom">
												<div class="col-xs-12">
													<div class="row">
														<div class="col-2 date">
															<div class="large">{{ comment.created|date('d') }}</div>

															<div class="text-muted">{{ comment.created|date('M') }}</div>
														</div>

														<div class="col-10">
															<h4><a href="#">{{ comment.title }}</a></h4>
															<p>{{ comment.user }}</p>
															<p>{{ comment.description }}</p>
														</div>
													</div>
												</div>

												<div class="clear"></div>
											</div><!--End .article-->
                                            {% endfor %} 											
										</div>
									</div>
								</div>
							</div>
							
							<div class="col-md-12 col-lg-4">
								<div class="card mb-4">
									<div class="card-block">
										<h3 class="card-title">Top Users</h3>
										
										<h6 class="card-subtitle mb-2 text-muted">Most active this week</h6>
										
										<div class="user-progress justify-center">
											<div class="col-sm-3 col-md-2" style="padding: 0;">
												<img src="{{ asset("images/profile-pic.jpg")}}" alt="profile photo" class="circle profile-photo" style="width: 100%; max-width: 100px;">
											</div>
											
											<div class="col-sm-6 col-md-8">
												<h6 class="pt-1">Username 1</h6>
												
												<div class="progress progress-custom">
													<div class="progress-bar bg-primary" style="width: 75%" role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"></div>
												</div>
											</div>
											
											<div class="col-sm-3 col-md-2">
												<div class="progress-label">75%</div>
											</div>
										</div>
										
										<div class="user-progress justify-center">
											<div class="col-sm-3 col-md-2" style="padding: 0;">
												<img src="{{ asset("images/profile-pic.jpg")}}" alt="profile photo" class="circle profile-photo" style="width: 100%; max-width: 100px;">
											</div>
											
											<div class="col-sm-6 col-md-8">
												<h6 class="pt-1">Username 2</h6>
												
												<div class="progress progress-custom">
													<div class="progress-bar bg-primary" style="width: 50%" role="progressbar" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
												</div>
											</div>
											
											<div class="col-sm-3 col-md-2">
												<div class="progress-label">50%</div>
											</div>
										</div>
										
										<div class="user-progress justify-center">
											<div class="col-sm-3 col-md-2" style="padding: 0;">
												<img src="{{ asset("images/profile-pic.jpg")}}" alt="profile photo" class="circle profile-photo" style="width: 100%; max-width: 100px;">
											</div>
											
											<div class="col-sm-6 col-md-8">
												<h6 class="pt-1">Username 3</h6>
												
												<div class="progress progress-custom">
													<div class="progress-bar bg-primary" style="width: 25%" role="progressbar" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
												</div>
											</div>
											
											<div class="col-sm-3 col-md-2">
												<div class="progress-label">25%</div>
											</div>
										</div>
										
										<div class="divider"></div>
										
										<div id="calendar"></div>
										
										<div class="divider"></div>

									</div>
								</div>

							</div>
						</section>
					</div>
				</section>
			</main>
		</div>
	</div>

{% endblock %}

